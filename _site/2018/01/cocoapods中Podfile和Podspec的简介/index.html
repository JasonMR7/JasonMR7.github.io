<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <title>cocoapods中Podfile和Podspec的简介 - JasonMR7</title>
  <meta name="description" content="Podfile">
  <meta name="author" content="Wei Wang">

  <meta name="twitter:card" content="summary">
  <meta name="twitter:title" content="cocoapods中Podfile和Podspec的简介 - JasonMR7">
  <meta name="twitter:description" content="Podfile">
  
  <meta property="og:type" content="article">
  <meta property="og:title" content="cocoapods中Podfile和Podspec的简介 - JasonMR7">
  <meta property="og:description" content="Podfile">
  
  <link rel="icon" type="image/png" href="/assets/images/favicon.png" />
  <link href="/assets/images/favicon.png" rel="shortcut icon" type="image/png">
  
  <link rel="stylesheet" href="/css/main.css">
  <link href="//netdna.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css" rel="stylesheet">

  <link rel="canonical" href="http://localhost:4000/2018/01/cocoapods%E4%B8%ADPodfile%E5%92%8CPodspec%E7%9A%84%E7%AE%80%E4%BB%8B/">
  <link rel="alternate" type="application/rss+xml" title="Jason Ruan" href="http://localhost:4000/feed.xml">
  
  <meta name="google-site-verification" content="1-1ZlHoRvM0T2FqPbW2S-qLgYXN6rsn52kErlMPd_gw" />
  
</head>


  <body>

    <span class="mobile btn-mobile-menu">
        <i class="fa fa-list btn-mobile-menu__icon"></i>
        <i class="fa fa-angle-up btn-mobile-close__icon hidden"></i>
    </span>
    
    <header class="panel-cover panel-cover--collapsed" style="background-image: url('/assets/images/background-cover.jpg')">
  <div class="panel-main">

    <div class="panel-main__inner panel-inverted">
    <div class="panel-main__content">

        <a href="/#blog" title="前往 Jason Ruan 的主页" class="blog-button"><img src="/assets/images/avatar.jpg" width="80" alt="Jason Ruan logo" class="panel-cover__logo logo" /></a>
        <h1 class="panel-cover__title panel-title"><a href="/#blog" title="link to homepage for Jason Ruan" class="blog-button">Jason Ruan</a></h1>
        
        <span class="panel-cover__subtitle panel-subtitle">一只iOS开发</span>
        
        <hr class="panel-cover__divider" />
        <p class="panel-cover__description">愿我能拥有一个有趣的灵魂.</p>
        <hr class="panel-cover__divider panel-cover__divider--secondary" />
        
        
        <p class="panel-cover__description">遇见你很高兴</p>
        
        
        <div class="navigation-wrapper">
          <div>
            <nav class="cover-navigation cover-navigation--primary">
              <ul class="navigation">
                <li class="navigation__item"><a href="/#blog" title="Visit blog" class="blog-button">Blog</a></li>
                
                  <li class="navigation__item"><a href="http://project.onevcat.com" target="_blank" title="My Projects">Projects</a></li>
                
              </ul>
            </nav>
          </div>
          
          <div><nav class="cover-navigation navigation--social">
  <ul class="navigation">

  
  <!-- Weibo -->
  <li class="navigation__item">
    <a href="http://weibo.com/阮明哲哲哲丶" title="@阮明哲哲哲丶 的微博" target="_blank">
      <i class='social fa fa-weibo'></i>
      <span class="label">Weibo</span>
    </a>
  </li>
  

  
  <!-- Github -->
  <li class="navigation__item">
    <a href="https://github.com/JasonMR7" title="@JasonMR7 的 Github" target="_blank">
      <i class='social fa fa-github'></i>
      <span class="label">Github</span>
    </a>
  </li>
  
  
  

  

  <!-- RSS -->
  <li class="navigation__item">
    <a href="/feed.xml" rel="author" title="RSS" target="_blank">
      <i class='social fa fa-rss'></i>
      <span class="label">RSS</span>
    </a>
  </li>

  
  <!-- Email -->
  <li class="navigation__item">
    <a href="mailto:yin244654177@gmail.com" title="Contact me">
      <i class='social fa fa-envelope'></i>
      <span class="label">Email</span>
    </a>
  </li>
  

  </ul>
</nav>
</div>
        </div>
      </div>
    </div>
    
    
    <div class="panel-cover--overlay cover-slate"></div>
    
  </div>
</header>


    <div class="content-wrapper">
        <div class="content-wrapper__inner">
            <article class="post-container post-container--single" itemscope itemtype="http://schema.org/BlogPosting">
  <header class="post-header">
    <div class="post-meta">
      <time datetime="2018-01-29 23:00:00 +0800" itemprop="datePublished" class="post-meta__date date">2018-01-29</time> &#8226; <span class="post-meta__tags tags"></span>
    </div>
    <h1 class="post-title">cocoapods中Podfile和Podspec的简介 - JasonMR7</h1>
  </header>

  <section class="post">
    <h2 id="podfile">Podfile</h2>

<p>普通的Project，通过cd到根目录，执行<code class="highlighter-rouge">pod init</code>便会生成Podfile文件</p>

<p>一个简单的Podfile是这样的：</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">target</span> <span class="s1">'test'</span> <span class="k">do</span>
<span class="n">pod</span> <span class="s1">'AFNetworking'</span><span class="p">,</span> <span class="s1">'~&gt; 3.1.0'</span>
<span class="k">end</span>
</code></pre>
</div>

<h2 id="dependencies">Dependencies</h2>

<h3 id="pod">pod</h3>

<p>第一行即指定Project中具体的target</p>

<p>第二行是 <code class="highlighter-rouge">pod 'AFNetworking'</code></p>

<p>前一段表示指定依赖的库，这里即为AFNetworking</p>

<p>后一段<code class="highlighter-rouge">3.1.0</code>即为版本号</p>

<ul>
  <li>
    <h4 id="version">Version</h4>

    <p>中间这一段<code class="highlighter-rouge">~&gt;</code>是一个符号，除了<code class="highlighter-rouge">~&gt;</code>其实还有很多，如下</p>

    <ul>
      <li><code class="highlighter-rouge">= 0.1</code> 指定版本为0.1</li>
      <li><code class="highlighter-rouge">&gt; 0.1</code> 大于 0.1，如果有很多，取最高版本</li>
      <li><code class="highlighter-rouge">&gt;= 0.1</code> 大于等于 0.1，如果有很多，取最高版本</li>
      <li><code class="highlighter-rouge">&lt; 0.1</code> 小于 0.1，如果有很多，取最高版本</li>
      <li><code class="highlighter-rouge">&lt;= 0.1</code> 小于等于 0.1，如果有很多，取最高版本</li>
      <li><code class="highlighter-rouge">~&gt; 0.1.2</code> 大于等于 0.1.2且小于0.2，如果有很多，取最高版本</li>
      <li><code class="highlighter-rouge">不写 </code>  始终取最高版本</li>
    </ul>
  </li>
  <li>
    <h4 id="from-a-podspec-in-the-root-of-a-library-repository">From a podspec in the root of a library repository.</h4>

    <p>除了版本，还可以通过git的其他方式拉取</p>

    <p>To use the <code class="highlighter-rouge">master</code> branch of the repository:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">pod</span> <span class="s1">'AFNetworking'</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">'https://github.com/gowalla/AFNetworking.git'</span>
</code></pre>
    </div>

    <p>To use a different branch of the repository:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">pod</span> <span class="s1">'AFNetworking'</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">'https://github.com/gowalla/AFNetworking.git'</span><span class="p">,</span> <span class="ss">:branch</span> <span class="o">=&gt;</span> <span class="s1">'dev'</span>
</code></pre>
    </div>

    <p>To use a tag of the repository:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">pod</span> <span class="s1">'AFNetworking'</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">'https://github.com/gowalla/AFNetworking.git'</span><span class="p">,</span> <span class="ss">:tag</span> <span class="o">=&gt;</span> <span class="s1">'0.7.0'</span>
</code></pre>
    </div>

    <p>Or specify a commit:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">pod</span> <span class="s1">'AFNetworking'</span><span class="p">,</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">'https://github.com/gowalla/AFNetworking.git'</span><span class="p">,</span> <span class="ss">:commit</span> <span class="o">=&gt;</span> <span class="s1">'082f8319af'</span>
</code></pre>
    </div>
  </li>
  <li>
    <h4 id="build-configurations">Build configurations</h4>

    <p>默认情况下， 依赖项会被安装在所有target的build configuration中。当然指定具体的某个configuration如下</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">pod</span> <span class="s1">'PonyDebugger'</span><span class="p">,</span> <span class="ss">:configurations</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'Debug'</span><span class="p">,</span> <span class="s1">'Beta'</span><span class="p">]</span>
</code></pre>
    </div>
  </li>
  <li>
    <h4 id="subspecs">Subspecs</h4>

    <p>当你用一个名字装Pod的时候，它将安装所有定义在podspec里面的默认subspec</p>

    <p>你可以这样指定:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">pod</span> <span class="s1">'QueryKit/Attribute'</span>
</code></pre>
    </div>

    <p>也可以指定一个集合，像下面这样:</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">pod</span> <span class="s1">'QueryKit'</span><span class="p">,</span> <span class="ss">:subspecs</span> <span class="o">=&gt;</span> <span class="p">[</span><span class="s1">'Attribute'</span><span class="p">,</span> <span class="s1">'QuerySet'</span><span class="p">]</span>
</code></pre>
    </div>
  </li>
  <li>
    <h4 id="using-the-files-from-a-local-path">Using the files from a local path</h4>

    <p>如果你想要一个自己开发的本地Pod，你可以用<code class="highlighter-rouge">path</code>，如下</p>

    <p><code class="highlighter-rouge">pod 'AFNetworking', :path =&gt; '~/Documents/AFNetworking'</code></p>

    <p>一般在做独立的库时，库的Example可以直接通过path引用自己的库，如下图中ZACommonExample的Podfile</p>

    <p><img src="https://github.com/JasonMR7/JasonMR7.github.io/raw/master/assets/images/2018-03-13-远程私有仓库创建/远程私有仓库创建3.png" alt="alt" /></p>

    <p>可以这么写：</p>

    <div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">pod</span> <span class="s1">'ZACommon'</span><span class="p">,</span> <span class="ss">:path</span> <span class="o">=&gt;</span> <span class="s1">'../'</span>
</code></pre>
    </div>
  </li>
</ul>

<h2 id="sources">Sources</h2>

<p>Podfile检索的源，全局的，不存储在某个target定义里面</p>

<h3 id="source">source</h3>

<p>指定specs的位置，如果有远程私有仓库，比如我们自己的gitlab，需要写上类似如下的源定义，而cocoapods 官方source是隐式的需要的，一旦你指定了其他source 你就需要也把官方的指定上</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">source</span> <span class="s1">'https://github.com/CocoaPods/Specs.git'</span>
<span class="n">source</span> <span class="s1">'http://gitlab.zhenai.com/ios/ZASpec.git'</span>
</code></pre>
</div>

<h2 id="hooks">Hooks</h2>

<p>Podfile提供了钩子用来在安装时被调用</p>

<p>Hooks也全局的，不存储在某个target定义里面</p>

<h3 id="plugin">plugin</h3>

<p>使用plugin可以指定某个插件在安装过程中使用</p>

<p>如，指定用<code class="highlighter-rouge">slather</code> 和 <code class="highlighter-rouge">cocoapods-keys</code>插件</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">plugin</span> <span class="s1">'cocoapods-keys'</span><span class="p">,</span> <span class="ss">:keyring</span> <span class="o">=&gt;</span> <span class="s1">'Eidolon'</span>
<span class="n">plugin</span> <span class="s1">'slather'</span>
</code></pre>
</div>

<h3 id="pre_install">pre_install</h3>

<p>这个钩子允许你在Pods被下载后但是还未安装前对Pods做一些改变</p>

<p>例子:</p>

<p>让cocoapods对静态库支持</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">pre_install</span> <span class="k">do</span> <span class="o">|</span><span class="n">installer</span><span class="o">|</span>
    <span class="c1"># workaround for https://github.com/CocoaPods/CocoaPods/issues/3289</span>
    <span class="no">Pod</span><span class="o">::</span><span class="no">Installer</span><span class="o">::</span><span class="no">Xcode</span><span class="o">::</span><span class="no">TargetValidator</span><span class="p">.</span><span class="nf">send</span><span class="p">(</span><span class="ss">:define_method</span><span class="p">,</span> <span class="ss">:verify_no_static_framework_transitive_dependencies</span><span class="p">)</span> <span class="p">{}</span>
<span class="k">end</span>
</code></pre>
</div>

<h3 id="post_install">post_install</h3>

<p>这个钩子允许你在生成的Xcode project写入硬盘或者其他你想执行的操作前做最后的改动</p>

<p>例子:</p>

<p>给所有target自定义编译配置</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">post_install</span> <span class="k">do</span> <span class="o">|</span><span class="n">installer</span><span class="o">|</span>
  <span class="n">installer</span><span class="p">.</span><span class="nf">pods_project</span><span class="p">.</span><span class="nf">targets</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">target</span><span class="o">|</span>
    <span class="n">target</span><span class="p">.</span><span class="nf">build_configurations</span><span class="p">.</span><span class="nf">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">config</span><span class="o">|</span>
      <span class="n">config</span><span class="p">.</span><span class="nf">build_settings</span><span class="p">[</span><span class="s1">'GCC_ENABLE_OBJC_GC'</span><span class="p">]</span> <span class="o">=</span> <span class="s1">'supported'</span>
    <span class="k">end</span>
  <span class="k">end</span>
<span class="k">end</span>
</code></pre>
</div>

<h2 id="podspec">Podspec</h2>

<p>如果要自己写一个库，就必须要了解与Podfile相对应的Podspec</p>

<p>一个Podspec规范描述了库的一个版本，它包含库的名称、版本、说明、要使用的文件等信息</p>

<p>通过cd到根目录，执行<code class="highlighter-rouge">pod spec create [name]</code>即可生成一个.podspec</p>

<p>一个简单的Podspec是这样的：</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="no">Pod</span><span class="o">::</span><span class="no">Spec</span><span class="p">.</span><span class="nf">new</span> <span class="k">do</span> <span class="o">|</span><span class="n">spec</span><span class="o">|</span>
  <span class="n">spec</span><span class="p">.</span><span class="nf">name</span>         <span class="o">=</span> <span class="s1">'Reachability'</span>
  <span class="n">spec</span><span class="p">.</span><span class="nf">version</span>      <span class="o">=</span> <span class="s1">'3.1.0'</span>
  <span class="n">spec</span><span class="p">.</span><span class="nf">license</span>      <span class="o">=</span> <span class="p">{</span> <span class="ss">:type</span> <span class="o">=&gt;</span> <span class="s1">'BSD'</span> <span class="p">}</span>
  <span class="n">spec</span><span class="p">.</span><span class="nf">homepage</span>     <span class="o">=</span> <span class="s1">'https://github.com/tonymillion/Reachability'</span>
  <span class="n">spec</span><span class="p">.</span><span class="nf">authors</span>      <span class="o">=</span> <span class="p">{</span> <span class="s1">'Tony Million'</span> <span class="o">=&gt;</span> <span class="s1">'tonymillion@gmail.com'</span> <span class="p">}</span>
  <span class="n">spec</span><span class="p">.</span><span class="nf">summary</span>      <span class="o">=</span> <span class="s1">'ARC and GCD Compatible Reachability Class for iOS and OS X.'</span>
  <span class="n">spec</span><span class="p">.</span><span class="nf">source</span>       <span class="o">=</span> <span class="p">{</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">'https://github.com/tonymillion/Reachability.git'</span><span class="p">,</span> <span class="ss">:tag</span> <span class="o">=&gt;</span> <span class="s1">'v3.1.0'</span> <span class="p">}</span>
  <span class="n">spec</span><span class="p">.</span><span class="nf">source_files</span> <span class="o">=</span> <span class="s1">'Reachability.{h,m}'</span>
  <span class="n">spec</span><span class="p">.</span><span class="nf">framework</span>    <span class="o">=</span> <span class="s1">'SystemConfiguration'</span>
<span class="k">end</span>
</code></pre>
</div>

<h2 id="root-specification">Root specification</h2>

<p>七大必要元素:</p>

<h3 id="name">name</h3>

<p>库的名字</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">name</span> <span class="o">=</span> <span class="err">'</span><span class="no">AFNetworking</span>
</code></pre>
</div>

<h3 id="version-1">version</h3>

<p>库的版本</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">version</span> <span class="o">=</span> <span class="s1">'0.0.1'</span>
</code></pre>
</div>

<h3 id="authors">authors</h3>

<p>库的作者</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">version</span> <span class="o">=</span> <span class="s1">'0.0.1'</span>
</code></pre>
</div>

<h3 id="license">license</h3>

<p>库的证书</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">license</span> <span class="o">=</span> <span class="s1">'MIT'</span>
</code></pre>
</div>

<h3 id="homepage">homepage</h3>

<p>库的首页</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">homepage</span> <span class="o">=</span> <span class="s1">'http://www.example.com'</span>
</code></pre>
</div>

<h3 id="license-1">license</h3>

<p>库的源</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">source</span> <span class="o">=</span> <span class="p">{</span> <span class="ss">:git</span> <span class="o">=&gt;</span> <span class="s1">'https://github.com/AFNetworking/AFNetworking.git'</span><span class="p">,</span>
                <span class="ss">:tag</span> <span class="o">=&gt;</span> <span class="n">spec</span><span class="p">.</span><span class="nf">version</span><span class="p">.</span><span class="nf">to_s</span> <span class="p">}</span>
</code></pre>
</div>

<h3 id="summary">summary</h3>

<p>库的简述</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">summary</span> <span class="o">=</span> <span class="s1">'Computes the meaning of life.'</span>
</code></pre>
</div>

<h2 id="platform">Platform</h2>

<p>库的支持平台</p>

<p>如iOS，8.0以上</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">s</span><span class="p">.</span><span class="nf">platform</span> <span class="o">=</span> <span class="ss">:ios</span><span class="p">,</span> <span class="s1">'8.0'</span>
</code></pre>
</div>

<h2 id="build-settings">Build settings</h2>

<h3 id="dependency">dependency</h3>

<p>依赖的库</p>

<p>作为一个库，有时候需要依赖其他的库，如ZANetworking网络库会依赖AFNetworking，语法和pod差不多，不过后面只能跟版本号，其他依赖网络库的工程通过pod依赖了ZANetworking，下载时会同时把AFNetworking也下载过来</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">dependency</span> <span class="s1">'AFNetworking'</span><span class="p">,</span> <span class="s1">'~&gt; 3.1.0'</span>
</code></pre>
</div>

<h3 id="requires_arc">requires_arc</h3>

<p>指明哪些文件使用ARC。默认是true，表明全部文件都是ARC，或者设置为false，指定所有ARC的文件</p>

<p>例：</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">requires_arc</span> <span class="o">=</span> <span class="kp">true</span>
</code></pre>
</div>

<p>或者</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">requires_arc</span> <span class="o">=</span> <span class="kp">false</span>
<span class="n">spec</span><span class="p">.</span><span class="nf">requires_arc</span> <span class="o">=</span> <span class="s1">'Classes/Arc'</span>
<span class="n">spec</span><span class="p">.</span><span class="nf">requires_arc</span> <span class="o">=</span> <span class="p">[</span><span class="s1">'Classes/*ARC.m'</span><span class="p">,</span> <span class="s1">'Classes/ARC.mm'</span><span class="p">]</span>
</code></pre>
</div>

<p>对于不是ARC的文件会自动添加<code class="highlighter-rouge">-fno-objc-arc</code> compiler flag</p>

<h3 id="frameworks">frameworks</h3>

<p>依赖的系统frameworks，多个framework,用逗号分开</p>

<p>例：</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">frameworks</span> <span class="o">=</span> <span class="s1">'QuartzCore'</span><span class="p">,</span> <span class="s1">'CoreData'</span>
</code></pre>
</div>

<h3 id="weak_frameworks">weak_frameworks</h3>

<p>如果在高版本的OS中调用新增的功能，并且在低版本的OS中依然能够运行,那么就要用到weak_frameworks.如果引用的某些类或者接口在低版本中并不支持，对于不支持的接口，可以在运行的时候判断，这样程序不会出错，如果不weak引用，程序在低版本下启动的时候就会崩溃掉</p>

<p>例:</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">weak_frameworks</span> <span class="o">=</span> <span class="s1">'Twitter'</span><span class="p">,</span> <span class="s1">'SafariServices'</span>
</code></pre>
</div>

<h3 id="libraries">libraries</h3>

<p>依赖的系统libraries，多个用逗号分开，去掉lib开头</p>

<p>例如</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">libraries</span> <span class="o">=</span> <span class="s1">'xml2'</span><span class="p">,</span> <span class="s1">'z'</span>  <span class="c1">#z表示libz.tdb,后缀不需要,lib开头的省略lib</span>
</code></pre>
</div>

<h3 id="prefix_header_contents">prefix_header_contents</h3>

<p>类似于pch，有多个用逗号隔开</p>

<p>例：</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">prefix_header_contents</span> <span class="o">=</span> <span class="s1">'#import &lt;UIKit/UIKit.h&gt;'</span><span class="p">,</span> <span class="s1">'#import &lt;Foundation/Foundation.h&gt;'</span>
</code></pre>
</div>

<p>或者</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">s</span><span class="p">.</span><span class="nf">prefix_header_contents</span> <span class="o">=</span> <span class="o">&lt;&lt;-</span><span class="no">EOS</span><span class="sh">
 #ifdef __OBJC__
 #import "ZAPrefix.h"    //ZAPrefix包含了所有头文件
 #endif 
</span><span class="no">EOS</span>
</code></pre>
</div>

<h3 id="pod_target_xcconfig">pod_target_xcconfig</h3>

<p>表示pod 本身被依赖时，修改的编译选项</p>

<p>比如framework的路径等</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">s</span><span class="p">.</span><span class="nf">pod_target_xcconfig</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s1">'FRAMEWORK_SEARCH_PATHS'</span> <span class="o">=&gt;</span> <span class="s1">'$(inherited) $(PODS_ROOT)/GTSDK $(PODS_ROOT)/Bugly $(PODS_ROOT)/ksyhttpcache/framework $(PODS_ROOT)/KSYMediaPlayer_iOS/framework/live'</span><span class="p">,</span>
    <span class="s1">'OTHER_LDFLAGS'</span>            <span class="o">=&gt;</span> <span class="s1">'$(inherited) -undefined dynamic_lookup -ObjC'</span><span class="p">,</span>
    <span class="s1">'ENABLE_BITCODE'</span>           <span class="o">=&gt;</span> <span class="s1">'NO'</span>
  <span class="p">}</span>
</code></pre>
</div>

<h2 id="file-patterns">File patterns</h2>

<h3 id="source_files">source_files</h3>

<p>源文件</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">source_files</span> <span class="o">=</span> <span class="s1">'Classes/**/*.{h,m}'</span>
<span class="n">spec</span><span class="p">.</span><span class="nf">source_files</span> <span class="o">=</span> <span class="s1">'Classes/**/*.{h,m}'</span><span class="p">,</span> <span class="s1">'More_Classes/**/*.{h,m}'</span>
</code></pre>
</div>

<h3 id="exclude_files">exclude_files</h3>

<p>source_files中指定排除的文件</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">exclude_files</span> <span class="o">=</span> <span class="s1">'Classes/**/unused.{h,m}'</span>
</code></pre>
</div>

<h3 id="vendored_frameworks">vendored_frameworks</h3>

<p>依赖的本地三方库路径</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">ios</span><span class="p">.</span><span class="nf">vendored_frameworks</span> <span class="o">=</span> <span class="s1">'ZABaseBusinessModule/Classes/BaseModule/ZMCredit/ZMCreditSDK/*.framework'</span>
</code></pre>
</div>

<h3 id="vendored_libraries">vendored_libraries</h3>

<p>依赖的本地三方.a文件路径</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">spec</span><span class="p">.</span><span class="nf">ios</span><span class="p">.</span><span class="nf">vendored_libraries</span> <span class="o">=</span> <span class="s1">'Libraries/libProj4.a'</span>
</code></pre>
</div>

<h3 id="resource_bundles">resource_bundles</h3>

<p>资源文件，比如图片，音频视频等</p>

<div class="language-ruby highlighter-rouge"><pre class="highlight"><code><span class="n">s</span><span class="p">.</span><span class="nf">resources</span> <span class="o">=</span> <span class="s1">'ZABaseBusinessModule/Resources/**/*'</span>
</code></pre>
</div>

<p>值得注意的是，通过pods导入的资源将不在MainBundle下，所有资源会生成在一个新的Bundle下</p>

<p>所以取资源的时候需要指定bundle来获取</p>

<pre><code class="language-objective-c">[UIImage imageNamed:imageName inBundle:[NSBundle bundleForClass:[self class]] compatibleWithTraitCollection:nil];
</code></pre>

<h2 id="参考文献">参考文献</h2>

<p><a href="https://guides.cocoapods.org/syntax/podfile.html#podfile">Podfile Syntax Reference</a></p>

<p><a href="https://guides.cocoapods.org/syntax/podspec.html">Podspec Syntax Reference</a></p>

  </section>
</article>

<section class="read-more">
   
   
   <div class="read-more-item">
       <span class="read-more-item-dim">最近的文章</span>
       <h2 class="post-list__post-title post-title"><a href="/2018/03/%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E5%88%9B%E5%BB%BA/" title="link to 远程私有仓库创建 - JasonMR7">远程私有仓库创建 - JasonMR7</a></h2>
       <p class="excerpt">背景对于一些自己写的多复用公用组件，或者一些需要二次修改的多复用第三方组件，而这些代码因为某些原因你又不想公开他们，这时我们可以将代码上传到一个固定的私有仓库，通过cocoapods更好的管理他们。库的选择可以是oschina、github(￥7/month)、公司自己的git服务器等，本文以gitlab为例正文创建私有代码库进入gitlab创建代码库，如下图  步骤一：  步骤二      步骤三    将仓库克隆到本地，添加仓库名代码文件夹、仓库名.podspec 描述文件，最好还有一...&hellip;</p>
       <div class="post-list__meta"><time datetime="2018-03-13 17:49:00 +0800" class="post-list__meta--date date">2018-03-13</time> &#8226; <span class="post-list__meta--tags tags"></span><a class="btn-border-small" href=/2018/03/%E8%BF%9C%E7%A8%8B%E7%A7%81%E6%9C%89%E4%BB%93%E5%BA%93%E5%88%9B%E5%BB%BA/>继续阅读</a></div>
   </div>
   
   
   
</section>

<section class="post-comments">
  
    <div id="disqus_thread"></div>
    <script>
    
    var disqus_config = function () {
        this.page.url = "http://localhost:4000/2018/01/cocoapods%E4%B8%ADPodfile%E5%92%8CPodspec%E7%9A%84%E7%AE%80%E4%BB%8B/";
        this.page.identifier = "/2018/01/cocoapods%E4%B8%ADPodfile%E5%92%8CPodspec%E7%9A%84%E7%AE%80%E4%BB%8B/";
    };

    var disqus_shortname = 'vno-jekyll';
    
    (function() { // DON'T EDIT BELOW THIS LINE
        var d = document, s = d.createElement('script');
        s.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        s.setAttribute('data-timestamp', +new Date());
            (d.head || d.body).appendChild(s);
        })();
    </script>
    <noscript>要查看<a href="http://disqus.com/?ref_noscript"> Disqus </a>评论，请启用 JavaScript</noscript>
    
  
  
  
  
</section>


            <section class="footer">
    <footer>
    	<span class="footer__copyright">本站点采用<a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">知识共享 署名-非商业性使用-相同方式共享 4.0 国际 许可协议</a></span>
        <span class="footer__copyright">由 <a href="https://jekyllrb.com">Jekyll</a> 于 2018-08-03 生成，感谢 <a href="https://www.digitalocean.com/?refcode=30ed2d146762">Digital Ocean</a> 为本站提供稳定的 VPS 服务</span>
        <span class="footer__copyright">本站由 <a href="JasonMR7.github.io">@Jaosn Ruan</a> 创建，采用 <a href="https://github.com/onevcat/vno-jekyll">Vno - Jekyll</a> 作为主题，您可以在 GitHub 找到<a href="https://github.com/onevcat/OneV-s-Den">本站源码</a> - &copy; 2018</span>
    </footer>
</section>

        </div>
    </div>
    
    <script type="text/javascript" src="//code.jquery.com/jquery-1.11.3.min.js"></script>

<script type="text/javascript" src="/js/main.js"></script>



    
  </body>

</html>
